<div class="container mt-4">

  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4  ">

    @for(item of cartItems; track item.product.id) {
      <div class="col card h-100 shadow-sm position-relative m-3"
          style="cursor: pointer"
          (click)="handleCardClick($event, item.product.id)">

        <div class="position-relative">
          <img [src]="item.product.thumbnail"
              class="card-img-top"
              style="height: 250px; object-fit: cover;">
          <span class="position-absolute top-0 end-0 badge rounded-pill me-2 mt-2 bg-success">
            {{ item.quantity }}
          </span>
        </div>

        <div class="card-body d-flex flex-column">
          <div class="d-flex justify-content-between align-items-start mb-2">
            <h5 class="card-title mb-0">{{ item.product.title }}</h5>
            <h5 class="text-primary">{{ item.product.price | currency }}</h5>
          </div>

          <div class="mb-2">
            <span class="text-warning" [innerHTML]="item.product.rating | starRating"></span>
            <small class="text-muted ms-1">({{ item.product.rating }})</small>
          </div>

          <p class="card-text flex-grow-1 text-muted mb-3"
            style="overflow: hidden; display: -webkit-box; -webkit-box-orient: vertical;">
            {{ item.product.description }}
          </p>

          <div class="d-flexr text-center" (click)="$event.stopPropagation()">
            <button class="btn btn-primary mx-2"
                    [disabled]="item.product.stock <= 0"
                    (click)="addToCart(item.product)">
              Add
            </button>
            <button class="btn btn-danger"
                    [disabled]="item.product.stock <= 0"
                    (click)="RemoveFromCart(item.product)">
              Remove
            </button>

          </div>

        </div>

      </div>
    }
    @empty {
      <div class="alert alert-danger w-100" role="alert">
        Cart is empty
      </div>
    }

  </div>

</div>
